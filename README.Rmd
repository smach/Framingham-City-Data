---
title: "Framingham City Data (Unofficial)"
author: "Sharon Machlis"
date: "November 9, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This project aims to collect important data about Framingham, Massachusetts and wrangle it so it is in a form useful for analysis. Data may be in one of two conceptual formats -- "tidy", sometimes called "long", with one observation in each row. This is useful for analysis in R and other platforms (including as a basis for Excel pivot tables). It starts in 2017 with Framingham's  transition from town to city form of government.

The project is currently in its early stages. I plan to post usable data on data.world in addition to the full project with code here.

The first two groups of data added: GIS files for precincts in new city districts, and results of Framingham's first-ever city general election in November 2017.

A few notes on structure and format:

* The data directory includes data in usable format for analysis.

* The data gis subdirectory includes GIS files and maps, such as precinct/district shapefiles. 

* The data elections subdirectory includes, not surprisingly, information about election results but also precinct polling places.

* When initial data was not in a usable format for analysis, the original data file is in the data-raw directory. 

* R files used to reshape the data are in the R directory. 

* PDFs were converted to Excel using the [CometDocs cloud service](https://www.cometdocs.com/).)

## Data files

*data/district_precinct_info.csv* -- which Framingham precincts make up each district.

### elections

#### 2017 general

*data/elections/2017_general_turnout_framingham.csv* -- turnout by precinct <br />
*data/elections/2017_general_turnout_bydistrict_framingham.csv* -- turnout by district <br />
*data/elections/2017_general_tidy_framingham.csv* <br /> -- complete results file (excluding turnout) by precinct in "tidy"/long format ready for analysis in R, Excel pivot tables, or other platforms.
*data/elections/2017_general_bydistrict_tidy_framingham_tidy.csv*  -- complete results file (excluding turnout) by district in "tidy"/long format ready for analysis in R, Excel pivot tables, or other platforms.<br />
*data/elections/2017_general_mayor_framingham.csv* <br />
*data/elections/2017_general_mayor_bydistrict_framingham.csv*<br />
*data/elections/2017_general_atlarge_framingham.csv* <br />
*data/elections/2017_general_atlarge_bydistrict_framingham.csv* <br />
*data/elections/2017_general_district_council_bydistrict_tidy_framingham.csv* <br />
*data/elections/2017_general_school_committee_bydistrict_tidy_framingham.csv*

#### 2017 preliminary

*data/elections/2017_preliminary_turnout_framingham.csv* -- turnout by precinct <br />
*data/elections/2017_preliminary_turnout_bydistrict_framingham.csv* -- turnout by district <br />
*data/elections/2017_preliminary_tidy_framingham.csv* <br /> -- complete results file (excluding turnout) by precinct in "tidy"/long format ready for analysis in R, Excel pivot tables, or other platforms.
*data/elections/2017_preliminary_bydistrict_tidy_framingham.csv*  -- complete results file (excluding turnout) by district in "tidy"/long format ready for analysis in R, Excel pivot tables, or other platforms.<br />
*data/elections/2017_preliminary_mayor_framingham.csv* <br />
*data/elections/2017_preliminary_mayor_framingham_tidy.csv* <br />
*data/elections/2017_preliminary_atlarge_framingham.csv* <br />
*data/elections/2017_preliminary_atlarge_framingham_tidy.csv* <br />
*data/elections/2017_preliminary_district_council_bydistrict_tidy_framingham.csv*

## Raw data files

*data-raw/elections/election_general_2017_framingham_raw.pdf* -- PDF of official Framingham November 2017 election results. [File posted on the Framingham website](http://www.framinghamma.gov/DocumentCenter/View/28924). 

*data-raw/elections/election_general_2017_framingham_raw.xlsx* -- Official Framingham November 2017 election results converted from PDF to Excel by [CometDocs](https://www.cometdocs.com/).


## GIS files

*data/gis/FramPrecincts/* - shapefiles of Framingham precincts. Includes District info. Read in with

```{r eval=FALSE}
library(sf)
framgeo <- tmaptools::read_shape("data/gis/FramPrecincts/FramPrecincts.shp", as.sf = TRUE)

```

*data/gis/framingham_basemap.Rda* - A leaflet HTML widget of Framingham districts and precincts.

## R files

*R/config.R* -- Setup needed to run these scripts, including installing packages not on your system. **Run config.R before trying to run any other R scripts in this project.**

*R/election_general_2017_framingham.R* -- R file to convert November 2017 official results spreadsheet to an analysis-friendly format.

*R/election_helpers.R* -- file with some useful functions for working with Framingham election data.




